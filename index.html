<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MilkShakeMiX ‚Ä¢ Card√°pio Visual</title>
<style>
  body{
    margin:0; text-align:center; background:#ffeaf3; color:#333;
    font-family: Arial, Helvetica, sans-serif;
  }
  header{
    background:#ff5fa2; color:#fff; padding:18px 10px; font-size:26px; font-weight:bold;
  }
  #wrap{ max-width:1100px; margin:20px auto; padding:0 14px; }

  /* BOT√ïES (Categorias e Sabores) */
  .btn{
    background:#ff5fa2;
    color:#fff;
    border:none;
    border-radius:999px;
    padding:12px 18px;
    font-weight:bold;
    font-size:16px;
    cursor:pointer;
    transition:all .2s;
    white-space:nowrap;
  }
  .btn:hover{ filter:brightness(.95); transform:scale(1.05); }
  .btn.active{
    background:#e94f8a;
    transform:scale(1.07);
    box-shadow:0 0 8px rgba(0,0,0,0.2);
  }

  /* Grade flex√≠vel para bot√µes */
  .flex{
    display:flex;
    flex-wrap:wrap;
    gap:12px;
    justify-content:center;
    align-items:center;
  }

  #titulo{ margin:8px 0 14px; color:#ff3399; }
  #voltar{ display:none; margin:10px auto; }

  /* Imagem responsiva */
  #viewer{
    display:none;
    margin:10px auto 22px;
    overflow:hidden;
  }
  #viewer img{
    max-width: 100%;
    max-height: 85vh;
    height: auto;
    width: auto;
    object-fit: contain;
    border-radius: 12px;
    box-shadow: 0 6px 22px rgba(0,0,0,.15);
    background:#f6f6f6;
  }

  .hint{ color:#666; font-size:13px; margin-top:6px; }
</style>
</head>
<body>
<header>MilkShakeMiX üç®</header>

<div id="wrap">
  <button id="voltar" class="btn" onclick="renderCategorias()">‚Üê Voltar</button>
  <h2 id="titulo">Categorias</h2>
  <div id="lista" class="flex"></div>

  <div id="viewer">
    <img id="imgView" src="" alt="">
    <div class="hint" id="imgName"></div>
  </div>
</div>

<script>
var CATALOGO = {
  "MilkShakes Tradicionais": [
    "Abacaxi.jpg",
    "Abacaxi ao Vinho.jpg",
    "Abacaxi com Hortel√£.jpg",
    "Algod√£o Doce.jpg"
  ],
  "MilkShakes Especiais": [],
  "Mix Twist": [],
  "Mix Frutas": [],
  "Mix Chocolate": [],
  "Sundae": [],
  "A√ßa√≠ Shake": [],
  "Mix Kids": [],
  "Nacho": []
};

function folderFromCategory(cat){
  var s = cat;
  s = s.normalize ? s.normalize('NFD').replace(/[\u0300-\u036f]/g,'') : s;
  s = s.toLowerCase().replace(/[^a-z0-9]+/g,'_').replace(/^_|_$/g,'');
  return s;
}

var elTitulo = document.getElementById('titulo');
var elLista  = document.getElementById('lista');
var elVoltar = document.getElementById('voltar');
var elViewer = document.getElementById('viewer');
var elImg    = document.getElementById('imgView');
var elImgName= document.getElementById('imgName');
var categoriaAtiva = null;

function renderCategorias(){
  elTitulo.innerHTML = 'Categorias';
  elVoltar.style.display = 'none';
  elViewer.style.display = 'none';
  elLista.className = 'flex';
  elLista.innerHTML = '';
  categoriaAtiva = null;

  for (var cat in CATALOGO){
    if (!CATALOGO.hasOwnProperty(cat)) continue;
    var btn = document.createElement('button');
    btn.className = 'btn';
    btn.innerHTML = cat;
    btn.onclick = (function(c, b){
      return function(){
        categoriaAtiva = c;
        renderSabores(c);
        document.querySelectorAll('.btn').forEach(x=>x.classList.remove('active'));
        b.classList.add('active');
      };
    })(cat, btn);
    elLista.appendChild(btn);
  }
}

function renderSabores(cat){
  elTitulo.innerHTML = cat;
  elVoltar.style.display = 'inline-block';
  elViewer.style.display = 'none';
  elLista.className = 'flex';
  elLista.innerHTML = '';

  var sabores = CATALOGO[cat] || [];
  if (!sabores.length){
    var p = document.createElement('div');
    p.className = 'hint';
    p.innerHTML = 'Nenhum sabor cadastrado ainda.<br>Adicione imagens em <b>imagens/' + folderFromCategory(cat) + '/</b> e liste os arquivos no CATALOGO.';
    elLista.appendChild(p);
    return;
  }

  for (var i=0;i<sabores.length;i++){
    var file = sabores[i];
    var nome = file.replace(/\.[^.]+$/,'');
    var btn  = document.createElement('button');
    btn.className = 'btn';
    btn.innerHTML = nome;
    btn.onclick = (function(catLocal, fileLocal, nomeLocal){
      return function(){ mostrarImagem(catLocal, fileLocal, nomeLocal); };
    })(cat, file, nome);
    elLista.appendChild(btn);
  }
}

function mostrarImagem(cat, file, nome){
  var folder = folderFromCategory(cat);
  var src = 'imagens/' + folder + '/' + encodeURIComponent(file);
  elImg.src = src;
  elImg.alt = nome;
  elImgName.innerHTML = nome;
  elViewer.style.display = 'block';
}

renderCategorias();
</script>
</body>
</html>
